<p-toast></p-toast>
<p-message *ngIf="message" [severity]="message.severity" [text]="message.summary"></p-message>
<div class="p-fluid grid">
  <h5>Traitement des activités programmées</h5>
</div>
<p-divider></p-divider>
<br>
<div class="p-fluid grid">


    <!-- premier bloc-->
    <div class="p-fluid p-col-12 col-md-12 rightcontent">
      <div class="p-fluid grid">
        <div class="p-fluid p-col-12 col-md-6">
            <div><b>Programme:</b> {{programmation.projet? programmation.projet.programme?.code: '-'}}</div>
                <p>
                    {{programmation.projet? programmation.projet.programme?.libelle: '-'}}
                </p>
        </div>
        <div class="p-fluid p-col-12 col-md-6">
            <div><b>Projet:</b> </div>
            <p>
                {{programmation.projet? programmation.projet.libelle : '-'}}
            </p>
            <!-- Objectif operationnel 1.1 -->
        </div>
    </div>
    <p-divider></p-divider>

    <div class="p-fluid grid">
      <div class="p-fluid p-col-12 col-md-6">
          <div><b>Objectif stratégique:</b> {{programmation.objectif? programmation.objectif.action?.objectif?.code : '-'}}</div>
              <p>
                {{programmation.objectif? programmation.objectif.action?.objectif?.libelle : '-'}}
              </p>
      </div>
      <div class="p-fluid p-col-12 col-md-6">
        <div><b>Objectif opérationnel:</b> {{programmation.objectif? programmation.objectif.parent?.code: '-'}}</div>
        <p>
            {{programmation.objectif? programmation.objectif.parent?.libelle: '-'}}
        </p>
    </div>

  </div>
  <p-divider></p-divider>

        <div class="p-fluid grid">
            <div class="p-fluid p-col-12 col-md-6">
                <div> <b>Action:</b>{{programmation.objectif? programmation.objectif.action?.code : '-'}}</div>
                <p>
                    {{programmation.objectif? programmation.objectif.action?.libelle : '-'}}
                </p>
            </div>
            <div class="p-fluid p-col-12 col-md-6">
                <div><b>Sous objectif opérationnel:</b> {{programmation.objectif? programmation.objectif.code: '-'}}</div>
                <p>
                    {{programmation.objectif? programmation.objectif.libelle: '-'}}
                </p>
            </div>
        </div>
        <!-- <p-divider></p-divider>
        <div class="p-fluid grid">
            <div class="p-fluid p-col-12 col-md-6">
                <div>Produit</div>

            </div>
            <div class="p-fluid p-col-12 col-md-6">
                <div>Sous-objectif 1.1.1</div>
                <p>Contrary to popular belief, Lorem Ipsum is not simply class 2000 years old.Lorem Ipsum is not simply class 2000
                </p>
            </div>
        </div> -->

        <p-divider></p-divider>
        <div class="p-fluid grid">
            <div class="p-fluid p-col-12 col-md-6">
                <div><b>Activité:</b> {{programmation.code? programmation.code: '-'}}</div>
                <!-- <p>
                    There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected.
                </p> -->
            </div>
            <div class="p-fluid p-col-12 col-md-6">
                <div>{{programmation.activite? programmation.activite.libelle: '-'}}</div>
                <!-- <p>
                    Contrary to popular belief, Lorem Ipsum is not simply class 2000 years old.Lorem Ipsum is not simply class 2000
                </p> -->
            </div>
        </div>
        <p-divider></p-divider>
        <div class="p-fluid grid">
            <div class="p-fluid p-col-12 col-md-6">
                <div> <b>Coût réel:</b>{{programmation.coutReel}}</div>
            </div>
            <div class="p-fluid p-col-12 col-md-6">
                <div> <b>Coût prévisionnel</b>: {{programmation.coutPrevisionnel}}</div>
            </div>
            
        </div>

        <p-divider></p-divider>
        <div class="p-fluid grid">
            <div class="p-fluid p-col-12 col-md-6">
                <div> <b>Résultats attendus:</b>{{programmation.resultatsAttendus}}</div>
            </div>
            <div class="p-fluid p-col-12 col-md-6">
                <div> <b>Résultats atteints</b>: {{programmation.resultatsAtteints ? programmation.resultatsAtteints : '-'}}</div>
            </div>
        </div>
        <p-divider></p-divider>
        <div class="p-fluid grid">
            <div class="p-fluid p-col-12 col-md-6">
                <div> <b>Taux:</b>{{programmation.taux}}</div>
            </div>
        </div>
        <p-divider></p-divider>
        <div class="p-fluid grid n mt-5 ">
            <div class="p-fluid p-col-12 col-md-6 rowcontent">
                <label><b>Indicateur</b></label>
            </div>
            <div class="p-fluid p-col-12 col-md-6 rowcontent">
                {{programmation.indicateur}}
            </div>
        </div>

        <div class="p-fluid grid  mt-5">
            <div class="p-fluid p-col-12 col-md-6 rowcontent">
                <label><b>Cible</b></label>
            </div>
            <div class="p-fluid p-col-12 col-md-6 rowcontent">
                {{programmation.cible}}
            </div>
        </div>
        <!-- <p-divider></p-divider> -->
        <!-- Debut table -->

        <p-table #dt [value]="taches" [paginator]="false" >

            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="libelle">Taches
                        <!-- <p-sortIcon field="tache"></p-sortIcon> -->
                    </th>
                    <th pSortableColumn="valeurCible">Valeur cible
                        <!-- <p-sortIcon field="valeurCible"></p-sortIcon> -->
                    </th>
                    <th pSortableColumn="poids">Poids
                        <!-- <p-sortIcon field="poids"></p-sortIcon> -->
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex" let-tache>
                <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                    <td>{{tache.libelle}} </td>
                    <td>{{tache.valeur}} </td>
                    <td>{{tache.ponderation}}% </td>
                </tr>
            </ng-template>
        </p-table>

        <br><br>
        <!-- Fin Table -->
        <div class="p-fluid grid" >
          <div class="p-fluid p-col-12 col-md-2">
            <button  pButton pRipple type="button" (click)="onValider(programmation)" label="Valider" class="p-button-raised p-button-success"></button>
            <br>
            <br>
          </div>
          <div class="p-fluid p-col-12 col-md-2">
            <button pButton pRipple type="button" (click)="onReject()" label="Rejeter" class="p-button-raised p-button-danger"></button>
            <br>
            <br>
          </div>
          <div class="p-fluid p-col-12 col-md-2">
            <button pButton pRipple type="button" (click)="onReturn()" label="Retour" class="p-button-raised p-button-secondary" style="background-color: blue;"></button>
          </div>
      </div>

    </div>
    <!-- Fin premier bloc-->

    <!--  deuxieme bloc -->
   <p-dialog [(visible)]="btnCommentaire" [modal]="true" [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width:'60vw'}">
    <!-- <p-progressBar *ngIf="isDialogOpInProgress" mode="indeterminate"></p-progressBar> -->
    <p-message *ngIf="dialogErrorMessage" severity="error" [text]="dialogErrorMessage"></p-message>
    <form (ngSubmit)="rejetProgrammation()" #dtf="ngForm">
      <h6> Commentaires</h6>
      <input name="programmationId" #programmationId="ngModel" [(ngModel)]="commentaire.programmationId" pInputText type="hidden" />
      <textarea rows="25" cols="30" name="contenu" #contenu="ngModel" [(ngModel)]="commentaire.contenu" pInputTextarea>
    </textarea>
      <br><br>
      <div class="p-fluid grid">
          <div class="p-fluid p-col-12 col-md-2">
          </div>
          <div class="p-fluid p-col-12 col-md-2">
              <button pButton pRipple type="submit" label="Soumettre" class="p-button-raised p-button-success  "></button>
          </div>
          <div class="p-fluid p-col-12 col-md-2">
              <button pButton pRipple type="button" (click)="onReturn()" label="Annuler" class="p-button-raised p-button-secondary p-button-text " style="background-color: white;"></button>
          </div>
      </div>
  </form>
   </p-dialog>
    <!--Fin  deuxieme bloc -->
    <app-confirmation></app-confirmation>
</div>
