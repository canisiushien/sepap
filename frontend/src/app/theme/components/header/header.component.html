<div class="header-container">
  <div class="logo-container">
    <a (click)="toggleSidebar()" href="#" class="sidebar-toggle">
      <nb-icon icon="menu-2-outline"></nb-icon>
    </a>

    <img src="assets/images/logo.svg" routerLink="/workspace" alt="Image" width="250" />

    <a class="logo d-none d-lg-block"><span>Système de Suivi et Evaluation de la Performance <br> de l'Administration
        Publique</span></a>
  </div>


  <!-- Dialog-->
  <p-dialog [(visible)]="showDialog" [modal]="true" [maximizable]="true"
    [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '75vw'}">
    <p-table #dt [value]="notificationAgents" [paginator]="true" [rows]="recordsPerPage" [loading]="isLoading"
      (onLazyLoad)="onInfo()" [totalRecords]="totalRecords"
      [globalFilterFields]="['notification.objet','notification.contenu']"
      currentPageReportTemplate="Affichage {first} à {last} de {totalRecords} élements" [showCurrentPageReport]=true
      [rowsPerPageOptions]="[10, 20,30]" styleClass="p-datatable-sm">

      <ng-template pTemplate="caption">
        <div class="row">
          <div class="col" style="padding: 8px; margin-left: 8px">
            <span>Liste de mes notifications</span>
          </div>
          <div class="col text-right">
            <span class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input pInputText type="text" (input)="dt.filterGlobal($any($event.target)!.value, 'contains')"
                placeholder="Recherche..." />
            </span>
          </div>
        </div>

      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="objet">Objet
            <p-sortIcon field="objet"></p-sortIcon>
          </th>
          <th pSortableColumn="contenu">Contenu
            <p-sortIcon field="contenu"></p-sortIcon>
          </th>

        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex" let-notificationAgent>
        <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex" [pContextMenuRow]="notificationAgent">
          <td>{{notificationAgent ? notificationAgent.notification.objet : '-'}} </td>
          <td>{{notificationAgent ? notificationAgent.notification.contenu : '-'}} </td>
        </tr>
      </ng-template>
    </p-table>
    <p-divider></p-divider>
    <div class="p-ml-auto text-right">
      <button type="reset" label="Fermer" (click)="showDialog=false"
        class="p-button-raised p-button-text p-button-success mr-2" pButton></button>
    </div>
  </p-dialog>

  <!-- partie details profil -->

  <p-dialog [(visible)]="showProfil" [modal]="true" [maximizable]="true"
    [breakpoints]="{'960px': '75vw', '640px': '100vw'}" [style]="{width: '50vw'}">

    <ng-template pTemplate="header">

      <span class="p-mr-auto"> DETAILS UTILISATEUR</span>
    </ng-template>
    <div class="row">
      <div class="col-md-12">
        <ul class="list-group list-group-flush">
          <li class="list-group-item list-group-item-action">
            <span class="va-m"><span class="font-weight-bold">Matricule:</span> {{compte.matricule}}</span>
          </li>
          <li class="list-group-item list-group-item-action">
            <span class="va-m"><span class="font-weight-bold">Nom:</span> {{compte.nom}}</span>
          </li>
          <li class="list-group-item list-group-item-action">
            <span class="va-m"><span class="font-weight-bold"> Prénom:</span> {{compte.prenom}}</span>
          </li>

        </ul>
      </div>
      <div class="col-md-12">
        <ul class="list-group list-group-flush">
          <li class="list-group-item list-group-item-action">
            <span class="va-m"><span class="font-weight-bold">Statut:</span> {{compte.structureId}}</span>
          </li>
          <li class="list-group-item list-group-item-action">
            <span class="va-m"><span class="font-weight-bold">Email:</span> {{compte.email}}</span>
          </li>
          <li class="list-group-item list-group-item-action">
            <span class="va-m"><span class="font-weight-bold"> Téléphone:</span> {{compte.telephone}} </span>
          </li>

        </ul>
      </div>

    </div>
    <p-divider></p-divider>
    <div class="p-ml-auto text-right">
      <button description="reset" label="Fermer" (click)="showProfil=false"
        class="p-button-raised p-button-text p-button-success mr-2" pButton></button>
    </div>

  </p-dialog>
</div>

<div class="header-container">
  <nb-actions size="medium">
    <nb-action class="control-item" icon="email-outline"></nb-action>
    <nb-action class="control-item" icon="bell-outline" badgeText="+" badgeStatus="danger" (click)="onInfo()">
    </nb-action>


    <nb-action class="user-action">
      <!--<nb-action class="user-action" *nbIsGranted="['view', 'user']" -->
      <nb-user [nbContextMenu]="userMenu" [name]='username'>
      </nb-user>
    </nb-action>

  </nb-actions>
</div>